"use strict";(self["webpackChunkmy_cloud_javaweb_project"]=self["webpackChunkmy_cloud_javaweb_project"]||[]).push([[75],{2075:function(e,a,t){t.r(a),t.d(a,{default:function(){return p}});var s=t(6768);const o={class:"login-container"},r=["src"];function l(e,a,t,l,i,n){const c=(0,s.g2)("el-input"),d=(0,s.g2)("el-form-item"),h=(0,s.g2)("el-col"),p=(0,s.g2)("el-button"),u=(0,s.g2)("el-row"),m=(0,s.g2)("el-form"),k=(0,s.g2)("el-card");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(k,{class:"box-card"},{header:(0,s.k6)((()=>a[3]||(a[3]=[(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("span",null,"用户登录")],-1)]))),default:(0,s.k6)((()=>[(0,s.bF)(m,{model:i.form,"label-width":"80px"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{label:"用户名"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{modelValue:i.form.username,"onUpdate:modelValue":a[0]||(a[0]=e=>i.form.username=e)},null,8,["modelValue"])])),_:1}),(0,s.bF)(d,{label:"密码"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{type:"password",modelValue:i.form.password,"onUpdate:modelValue":a[1]||(a[1]=e=>i.form.password=e),"show-password":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(d,{label:"验证码"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{gutter:20},{default:(0,s.k6)((()=>[(0,s.bF)(h,{span:14},{default:(0,s.k6)((()=>[(0,s.bF)(c,{modelValue:i.form.captcha,"onUpdate:modelValue":a[2]||(a[2]=e=>i.form.captcha=e)},null,8,["modelValue"])])),_:1}),(0,s.bF)(h,{span:10},{default:(0,s.k6)((()=>[(0,s.bF)(p,{type:"primary",onClick:n.sendCaptcha},{default:(0,s.k6)((()=>a[4]||(a[4]=[(0,s.eW)("获取验证码")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),i.showCaptcha?((0,s.uX)(),(0,s.Wv)(d,{key:0,label:"Captcha："},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:i.captchaImg,alt:"captcha"},null,8,r)])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(d,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,{type:"primary",onClick:n.onSubmit},{default:(0,s.k6)((()=>a[5]||(a[5]=[(0,s.eW)("登录")]))),_:1},8,["onClick"]),(0,s.bF)(p,{onClick:n.register},{default:(0,s.k6)((()=>a[6]||(a[6]=[(0,s.eW)("注册")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])}t(4114);var i=t(1764),n=t(3169),c={data(){return{form:{username:"",password:"",captcha:""},captchaImg:"",showCaptcha:!1}},methods:{salt(){return{username:this.form.username,captcha:this.form.captcha,password:(0,n.MD5)(this.form.password).toString()}},onSubmit(){var e=this.salt();""!=e.name&&""!=e.password&&""!=e.captcha&&0!=this.showCaptcha?this.$axios.post(i.A.baseUrl+i.A.apiUrl+i.A.api.login,e).then((e=>{200==e.data.Code?(this.$cookies.set("token",e.data.token,{expires:30,path:"/"}),this.$cookies.set("permission",e.data.permission,{path:"/"}),this.$message.success(e.data.Reason),this.$router.push("/")):(this.$message.error(e.data.Reason),this.form.captcha="",this.form.password="",this.form.username="",this.sendCaptcha())})):this.$message.error("请输入完整信息")},sendCaptcha(){const e=(new Date).getTime();this.captchaImg=i.A.baseUrl+i.A.apiUrl+i.A.api.captcha+`?time=${e}`,this.showCaptcha=!0},register(){this.$router.push("/user/register")}},mounted(){var e=this.$cookies.get("token");null!=e&&""!=e&&this.$axios.post(i.A.baseUrl+i.A.apiUrl+i.A.api.authToken,{},{headers:{token:e}}).then((a=>{200===a.data.Code?(this.$cookies.set("token",e,{expires:30,path:"/"}),this.$cookies.set("permission",a.data.permission,{path:"/"}),this.$router.push("/")):(this.$cookies.remove("token"),this.$message.error(a.data.Reason))}))}},d=t(1241);const h=(0,d.A)(c,[["render",l],["__scopeId","data-v-09d2e63c"]]);var p=h}}]);
//# sourceMappingURL=75.3189bb7c.js.map