{"version":3,"file":"js/10.5f3182fe.js","mappings":"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","sources":["webpack://my_cloud_javaweb_project/./src/class/config.js","webpack://my_cloud_javaweb_project/./src/views/payment/LocalPage.vue","webpack://my_cloud_javaweb_project/./src/views/payment/LocalPage.vue?2a4f"],"sourcesContent":["const config = {\n    baseUrl: 'http://localhost:8081',\n    api: {\n        captcha: '/user/captcha',\n        login: '/user/login',\n        register: '/user/register',\n        logout: '/user/logout',\n        getUserInfo: '/user/getinfo',\n        authToken:'/user/token-auth',\n        ip: '/system/ip',\n        ShopInfo: \"/element/info\",\n        code: '/user/code',\n        selectUser:\"/user/select-info\",\n        deleteUser:\"/user/delete\",\n        updateUser:\"/user/change\",\n        deleteShop:\"/element/delete\",\n        uploadImg:\"/system/img/base64\",\n        updateShop:\"/element/change\",\n        insertShop:\"/element/insert\",\n        getOrders:\"/pay/getall\",\n        payInsert:\"/pay/top-up\",\n        payMyinfo:\"/pay/get\",\n        payEx:\"/pay/exchange\",\n        payForOrder:\"/pay/pay-order\"\n    },\n    apiUrl: '/api'\n}\nexport default config","<template>\n  <div class=\"payment-dashboard\">\n    <el-row :gutter=\"20\">\n      <!-- 账户余额卡片 -->\n      <el-col :span=\"12\">\n        <el-card shadow=\"hover\" class=\"balance-card\">\n          <div class=\"card-header\">\n            <span>账户余额</span>\n          </div>\n          <div class=\"card-content\">\n            <h1>¥ {{ mount }}</h1>\n            <el-button type=\"primary\" @click=\"handleRecharge\">充值</el-button>\n            <el-button type=\"success\" @click=\"handleTransfer\">转账</el-button>\n          </div>\n        </el-card>\n      </el-col>\n\n      <!-- 交易记录卡片 -->\n      <el-col :span=\"12\">\n        <el-card shadow=\"hover\" class=\"transaction-card\">\n          <template #header>\n            <div class=\"card-header\">\n              <span>最近交易记录</span>\n            </div>\n          </template>\n          <div class=\"card-content based-card\">\n            <el-table :data=\"transactions\" style=\"width: 100%\">\n              <el-table-column prop=\"orderId\" label=\"订单哈希\" width=\"290\" />\n              <el-table-column prop=\"time\" label=\"日期\" width=\"200\" />\n              <el-table-column prop=\"value\" label=\"交易发生额\" width=\"140\" />\n              <el-table-column prop=\"other\" label=\"备注\" width=\"150\" />\n            </el-table>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport config from \"@/class/config\";\nexport default {\n  data() {\n    return {\n      mount:\"1000.00\",\n      transactions: []\n    };\n  },\n  methods: {\n    handleRecharge() {\n      var token = this.$cookies.get(\"token\");\n      this.$prompt('请输入充值金额', '充值', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        inputPattern: /^[0-9]*\\.?[0-9]+$/,\n        inputErrorMessage: '请输入正确的金额'\n      }).then(({ value }) => {\n        this.$axios.post(config.baseUrl+config.apiUrl+config.api.payInsert+\"?value=\"+value,{\n        },{headers:{\n          'token':token\n          }}).then(res=>{\n           if(res.data.Code===200){\n             this.$message.success(res.data.Response);\n             this.$router.go(0);\n           }else{\n             this.$message.error(res.data.Response);\n           }\n          })\n      }).catch(\n          () => {\n            this.$message({\n              type: 'info',\n              message: '用户取消充值'\n            });\n          }\n      )\n    },\nhandleTransfer() {\n  const token = this.$cookies.get(\"token\");\n\n  this.$prompt('请输入转账金额', '转账', {\n    confirmButtonText: '确定',\n    cancelButtonText: '取消',\n    inputPattern: /^[0-9]*\\.?[0-9]+$/,\n    inputErrorMessage: '请输入正确的金额'\n  }).then(({ value: amount }) => {\n    this.$prompt('请输入收款方账号', '转账', {\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      inputPattern: /.+/,\n      inputErrorMessage: '请输入正确的账号'\n    }).then(({ value: account }) => {\n      this.transfer(amount, account, token);\n    }).catch(() => {\n      this.showCancelMessage();\n    });\n  }).catch(() => {\n    this.showCancelMessage();\n  });\n},\n\ntransfer(amount, account, token) {\n  this.$axios.post(config.baseUrl + config.apiUrl + config.api.payEx, {}, {\n    params: {\n      value: amount,\n      towho: account\n    },\n    headers: {\n      'token': token\n    }\n  }).then(res => {\n    if (res.data.Code === 200) {\n      this.$message.success(res.data.Response);\n      this.$router.go(0);\n    } else {\n      this.$message.error(res.data.Response);\n    }\n  }).catch(() => {\n    this.$message({\n      type: 'info',\n      message: '用户取消转账'\n    });\n  });\n},\n\nshowCancelMessage() {\n  this.$message({\n    type: 'info',\n    message: '用户取消转账'\n  });\n}\n\n  },\n  mounted() {\n    var token = this.$cookies.get(\"token\");\n    if(token==null||token===\"\"){\n      this.$message.error(\"未检测到登录态\");\n      this.$cookies.remove(\"token\");\n      this.$router.push(\"/user/login\");\n      return;\n    }\n  //   监测token有效\n    this.$axios.post(config.baseUrl+config.apiUrl+config.api.authToken,{},{headers:{\n      'token':token\n      }}).then(res=>{\n        if(res.data.Code==200){\n        //   注册token并更新\n          this.$cookies.set(\"token\",token,{expires:30,path:\"/\"});\n          this.$cookies.set(\"permission\",res.data.permission,{path:\"/\"});\n        }else{\n          this.$message.error(res.data.Response);\n          this.$cookies.remove(\"token\");\n          this.$router.push(\"/user/login\");\n          return;\n        }\n    })\n\n    this.$axios.post(config.baseUrl+config.apiUrl+config.api.getOrders,{},{headers:{\n      'token':token\n      }}).then(res=>{\n        if(res.data.Code==200){\n          this.transactions = res.data.Orders;\n           // this.transactions.value 保留两位小数 同时验证如果如果不为负数 则前面添加+好同时标注好人民币单位\n          for (var i=0;i<this.transactions.length;i++){\n            if(this.transactions[i].value>=0){\n              this.transactions[i].value = \"￥+\"+this.transactions[i].value.toFixed(2);\n            }else{\n              this.transactions[i].value = \"￥\"+this.transactions[i].value.toFixed(2);\n            }\n          }\n        }else{\n          this.$message.error(res.data.Response);\n        }\n    })\n    this.$axios.post(config.baseUrl+config.apiUrl+config.api.payMyinfo,{},{headers:{\n      'token':token\n      }}).then(res=>{\n        if(res.data.Code===200){\n          // res.data.Value;转换为保留两位小数\n          this.mount = res.data.Value.toFixed(2);\n        }else{\n          this.$message.error(res.data.Response);\n        }\n    })\n  }\n};\n</script>\n\n<style scoped>\n.payment-dashboard {\n  padding: 20px;\n}\n\n.balance-card, .function-card, .transaction-card {\n  height: 100%;\n}\n\n.card-header {\n  font-size: 18px;\n  font-weight: bold;\n  padding: 10px 0;\n  border-bottom: 1px solid #ebebeb;\n}\n\n.card-content  {\n  text-align: center;\n}\n\n.card-content h1 {\n  margin: 20px 0;\n  font-size: 24px;\n}\n\n.el-button {\n  margin: 10px;\n}\n.based-card{\n  text-align: left !important;\n}\n</style>\n","import { render } from \"./LocalPage.vue?vue&type=template&id=4f019e84&scoped=true\"\nimport script from \"./LocalPage.vue?vue&type=script&lang=js\"\nexport * from \"./LocalPage.vue?vue&type=script&lang=js\"\n\nimport \"./LocalPage.vue?vue&type=style&index=0&id=4f019e84&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4f019e84\"]])\n\nexport default __exports__"],"names":["config","baseUrl","api","captcha","login","register","logout","getUserInfo","authToken","ip","ShopInfo","code","selectUser","deleteUser","updateUser","deleteShop","uploadImg","updateShop","insertShop","getOrders","payInsert","payMyinfo","payEx","payForOrder","apiUrl","class","_createElementBlock","_hoisted_1","_createVNode","_component_el_row","gutter","default","_withCtx","_component_el_col","span","_component_el_card","shadow","_createElementVNode","_hoisted_2","_toDisplayString","$data","mount","_component_el_button","type","onClick","$options","handleRecharge","_cache","_createTextVNode","_","handleTransfer","header","_hoisted_3","_component_el_table","data","transactions","style","_component_el_table_column","prop","label","width","methods","token","this","$cookies","get","$prompt","confirmButtonText","cancelButtonText","inputPattern","inputErrorMessage","then","value","$axios","post","headers","res","Code","$message","success","Response","$router","go","error","catch","message","amount","account","transfer","showCancelMessage","params","towho","mounted","remove","push","set","expires","path","permission","Orders","i","length","toFixed","Value","__exports__","render"],"sourceRoot":""}