"use strict";(self["webpackChunkmy_cloud_javaweb_project"]=self["webpackChunkmy_cloud_javaweb_project"]||[]).push([[899],{7899:function(a,e,t){t.r(e),t.d(e,{default:function(){return d}});var s=t(6768);const o={class:"login-container"},r=["src"];function l(a,e,t,l,i,n){const c=(0,s.g2)("el-input"),h=(0,s.g2)("el-form-item"),p=(0,s.g2)("el-col"),d=(0,s.g2)("el-button"),u=(0,s.g2)("el-row"),m=(0,s.g2)("el-form"),k=(0,s.g2)("el-card");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(k,{class:"box-card"},{header:(0,s.k6)((()=>e[3]||(e[3]=[(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("span",null,"用户注册")],-1)]))),default:(0,s.k6)((()=>[(0,s.bF)(m,{model:i.form,"label-width":"80px"},{default:(0,s.k6)((()=>[(0,s.bF)(h,{label:"用户名"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{modelValue:i.form.username,"onUpdate:modelValue":e[0]||(e[0]=a=>i.form.username=a)},null,8,["modelValue"])])),_:1}),(0,s.bF)(h,{label:"密码"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{type:"password",modelValue:i.form.password,"onUpdate:modelValue":e[1]||(e[1]=a=>i.form.password=a),"show-password":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(h,{label:"验证码"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{gutter:20},{default:(0,s.k6)((()=>[(0,s.bF)(p,{span:14},{default:(0,s.k6)((()=>[(0,s.bF)(c,{modelValue:i.form.captcha,"onUpdate:modelValue":e[2]||(e[2]=a=>i.form.captcha=a)},null,8,["modelValue"])])),_:1}),(0,s.bF)(p,{span:10},{default:(0,s.k6)((()=>[(0,s.bF)(d,{type:"primary",onClick:n.sendCaptcha},{default:(0,s.k6)((()=>e[4]||(e[4]=[(0,s.eW)("获取验证码")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),i.showCaptcha?((0,s.uX)(),(0,s.Wv)(h,{key:0,label:"Captcha："},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:i.captchaImg,alt:"captcha"},null,8,r)])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(h,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{onClick:n.toLogin},{default:(0,s.k6)((()=>e[5]||(e[5]=[(0,s.eW)("登录")]))),_:1},8,["onClick"]),(0,s.bF)(d,{type:"primary",onClick:n.onSubmit},{default:(0,s.k6)((()=>e[6]||(e[6]=[(0,s.eW)("注册")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])}t(4114);var i=t(1764),n=t(3169),c={data(){return{form:{username:"",password:"",captcha:""},captchaImg:"",showCaptcha:!1}},methods:{salt(){return{username:this.form.username,captcha:this.form.captcha,password:(0,n.MD5)(this.form.password).toString()}},onSubmit(){var a=this.salt();""!=a.name&&""!=a.password&&""!=a.captcha&&0!=this.showCaptcha?this.$axios.post(i.A.baseUrl+i.A.apiUrl+i.A.api.register,a).then((a=>{200==a.data.Code?(this.$cookies.set("token",a.data.token,{expires:30,path:"/"}),this.$cookies.set("permission",a.data.permission,{path:"/"}),this.$message.success(a.data.Reason),this.$router.push("/")):(this.$message.error(a.data.Reason),this.form.captcha="",this.form.password="",this.form.username="",this.sendCaptcha())})):this.$message.error("请输入完整信息")},sendCaptcha(){const a=(new Date).getTime();this.captchaImg=i.A.baseUrl+i.A.apiUrl+i.A.api.captcha+`?time=${a}`,this.showCaptcha=!0},toLogin(){this.$router.push("/user/login")}},mounted(){var a=this.$cookies.get("token");null!=a&&""!=a&&this.$axios.post(i.A.baseUrl+i.A.apiUrl+i.A.api.authToken,{},{headers:{token:a}}).then((e=>{200==e.data.Code?(this.$cookies.set("token",a,{expires:30,path:"/"}),this.$cookies.set("permission",e.data.permission,{path:"/"}),this.$router.push("/")):(this.$cookies.remove("token"),this.$message.error(e.data.Reason))}))}},h=t(1241);const p=(0,h.A)(c,[["render",l],["__scopeId","data-v-f859719c"]]);var d=p}}]);
//# sourceMappingURL=899.46de94e3.js.map