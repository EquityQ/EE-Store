{"version":3,"file":"js/10.13a92c6c.js","mappings":"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","sources":["webpack://my_cloud_javaweb_project/./src/class/config.js","webpack://my_cloud_javaweb_project/./src/views/payment/LocalPage.vue","webpack://my_cloud_javaweb_project/./src/views/payment/LocalPage.vue?2a4f"],"sourcesContent":["const config = {\r\n    baseUrl: 'http://localhost:8081',\r\n    api: {\r\n        captcha: '/captcha',\r\n        login: '/user/login',\r\n        register: '/user/register',\r\n        logout: '/user/logout',\r\n        getUserInfo: '/user/getinfo',\r\n        authToken:'/user/token-auth',\r\n        ip: '/ip',\r\n        ShopInfo: \"/element/info\",\r\n        code: '/user/code',\r\n        selectUser:\"/user/select-info\",\r\n        deleteUser:\"/user/delete\",\r\n        updateUser:\"/user/change\",\r\n        deleteShop:\"/element/delete\",\r\n        uploadImg:\"/img/base64\",\r\n        updateShop:\"/element/change\",\r\n        insertShop:\"/element/insert\",\r\n        getOrders:\"/order/getall\",\r\n        payInsert:\"/pay/top-up\",\r\n        payMyinfo:\"/pay/get\",\r\n        payEx:\"/pay/exchange\",\r\n        payForOrder:\"/pay/pay-order\"\r\n    },\r\n    apiUrl: '/api'\r\n}\r\nexport default config","<template>\r\n  <div class=\"payment-dashboard\">\r\n    <el-row :gutter=\"20\">\r\n      <!-- 账户余额卡片 -->\r\n      <el-col :span=\"12\">\r\n        <el-card shadow=\"hover\" class=\"balance-card\">\r\n          <div class=\"card-header\">\r\n            <span>账户余额</span>\r\n          </div>\r\n          <div class=\"card-content\">\r\n            <h1>¥ {{ mount }}</h1>\r\n            <el-button type=\"primary\" @click=\"handleRecharge\">充值</el-button>\r\n            <el-button type=\"success\" @click=\"handleTransfer\">转账</el-button>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n\r\n      <!-- 交易记录卡片 -->\r\n      <el-col :span=\"12\">\r\n        <el-card shadow=\"hover\" class=\"transaction-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>最近交易记录</span>\r\n            </div>\r\n          </template>\r\n          <div class=\"card-content based-card\">\r\n            <el-table :data=\"transactions\" style=\"width: 100%\">\r\n              <el-table-column prop=\"orderId\" label=\"订单哈希\" width=\"290\" />\r\n              <el-table-column prop=\"time\" label=\"日期\" width=\"200\" />\r\n              <el-table-column prop=\"value\" label=\"交易发生额\" width=\"140\" />\r\n              <el-table-column prop=\"other\" label=\"备注\" width=\"150\" />\r\n            </el-table>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport config from \"@/class/config\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      mount:\"1000.00\",\r\n      transactions: []\r\n    };\r\n  },\r\n  methods: {\r\n    handleRecharge() {\r\n      var token = this.$cookies.get(\"token\");\r\n      this.$prompt('请输入充值金额', '充值', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        inputPattern: /^[0-9]*\\.?[0-9]+$/,\r\n        inputErrorMessage: '请输入正确的金额'\r\n      }).then(({ value }) => {\r\n        this.$axios.post(config.baseUrl+config.apiUrl+config.api.payInsert+\"?value=\"+value,{\r\n        },{headers:{\r\n          'token':token\r\n          }}).then(res=>{\r\n           if(res.data.Code===200){\r\n             this.$message.success(res.data.Response);\r\n             this.$router.go(0);\r\n           }else{\r\n             this.$message.error(res.data.Response);\r\n           }\r\n          })\r\n      }).catch(\r\n          () => {\r\n            this.$message({\r\n              type: 'info',\r\n              message: '用户取消充值'\r\n            });\r\n          }\r\n      )\r\n    },\r\nhandleTransfer() {\r\n  const token = this.$cookies.get(\"token\");\r\n\r\n  this.$prompt('请输入转账金额', '转账', {\r\n    confirmButtonText: '确定',\r\n    cancelButtonText: '取消',\r\n    inputPattern: /^[0-9]*\\.?[0-9]+$/,\r\n    inputErrorMessage: '请输入正确的金额'\r\n  }).then(({ value: amount }) => {\r\n    this.$prompt('请输入收款方账号', '转账', {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消',\r\n      inputPattern: /.+/,\r\n      inputErrorMessage: '请输入正确的账号'\r\n    }).then(({ value: account }) => {\r\n      this.transfer(amount, account, token);\r\n    }).catch(() => {\r\n      this.showCancelMessage();\r\n    });\r\n  }).catch(() => {\r\n    this.showCancelMessage();\r\n  });\r\n},\r\n\r\ntransfer(amount, account, token) {\r\n  this.$axios.post(config.baseUrl + config.apiUrl + config.api.payEx, {}, {\r\n    params: {\r\n      value: amount,\r\n      towho: account\r\n    },\r\n    headers: {\r\n      'token': token\r\n    }\r\n  }).then(res => {\r\n    if (res.data.Code === 200) {\r\n      this.$message.success(res.data.Response);\r\n      this.$router.go(0);\r\n    } else {\r\n      this.$message.error(res.data.Response);\r\n    }\r\n  }).catch(() => {\r\n    this.$message({\r\n      type: 'info',\r\n      message: '用户取消转账'\r\n    });\r\n  });\r\n},\r\n\r\nshowCancelMessage() {\r\n  this.$message({\r\n    type: 'info',\r\n    message: '用户取消转账'\r\n  });\r\n}\r\n\r\n  },\r\n  mounted() {\r\n    var token = this.$cookies.get(\"token\");\r\n    if(token==null||token===\"\"){\r\n      this.$message.error(\"未检测到登录态\");\r\n      this.$cookies.remove(\"token\");\r\n      this.$router.push(\"/user/login\");\r\n      return;\r\n    }\r\n  //   监测token有效\r\n    this.$axios.post(config.baseUrl+config.apiUrl+config.api.authToken,{},{headers:{\r\n      'token':token\r\n      }}).then(res=>{\r\n        if(res.data.Code==200){\r\n        //   注册token并更新\r\n          this.$cookies.set(\"token\",token,{expires:30,path:\"/\"});\r\n          this.$cookies.set(\"permission\",res.data.permission,{path:\"/\"});\r\n        }else{\r\n          this.$message.error(res.data.Response);\r\n          this.$cookies.remove(\"token\");\r\n          this.$router.push(\"/user/login\");\r\n          return;\r\n        }\r\n    })\r\n\r\n    this.$axios.post(config.baseUrl+config.apiUrl+config.api.getOrders,{},{headers:{\r\n      'token':token\r\n      }}).then(res=>{\r\n        if(res.data.Code==200){\r\n          this.transactions = res.data.Orders;\r\n           // this.transactions.value 保留两位小数 同时验证如果如果不为负数 则前面添加+好同时标注好人民币单位\r\n          for (var i=0;i<this.transactions.length;i++){\r\n            if(this.transactions[i].value>=0){\r\n              this.transactions[i].value = \"￥+\"+this.transactions[i].value.toFixed(2);\r\n            }else{\r\n              this.transactions[i].value = \"￥\"+this.transactions[i].value.toFixed(2);\r\n            }\r\n          }\r\n        }else{\r\n          this.$message.error(res.data.Response);\r\n        }\r\n    })\r\n    this.$axios.post(config.baseUrl+config.apiUrl+config.api.payMyinfo,{},{headers:{\r\n      'token':token\r\n      }}).then(res=>{\r\n        if(res.data.Code===200){\r\n          // res.data.Value;转换为保留两位小数\r\n          this.mount = res.data.Value.toFixed(2);\r\n        }else{\r\n          this.$message.error(res.data.Response);\r\n        }\r\n    })\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.payment-dashboard {\r\n  padding: 20px;\r\n}\r\n\r\n.balance-card, .function-card, .transaction-card {\r\n  height: 100%;\r\n}\r\n\r\n.card-header {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  padding: 10px 0;\r\n  border-bottom: 1px solid #ebebeb;\r\n}\r\n\r\n.card-content  {\r\n  text-align: center;\r\n}\r\n\r\n.card-content h1 {\r\n  margin: 20px 0;\r\n  font-size: 24px;\r\n}\r\n\r\n.el-button {\r\n  margin: 10px;\r\n}\r\n.based-card{\r\n  text-align: left !important;\r\n}\r\n</style>\r\n","import { render } from \"./LocalPage.vue?vue&type=template&id=4f019e84&scoped=true\"\nimport script from \"./LocalPage.vue?vue&type=script&lang=js\"\nexport * from \"./LocalPage.vue?vue&type=script&lang=js\"\n\nimport \"./LocalPage.vue?vue&type=style&index=0&id=4f019e84&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4f019e84\"]])\n\nexport default __exports__"],"names":["config","baseUrl","api","captcha","login","register","logout","getUserInfo","authToken","ip","ShopInfo","code","selectUser","deleteUser","updateUser","deleteShop","uploadImg","updateShop","insertShop","getOrders","payInsert","payMyinfo","payEx","payForOrder","apiUrl","class","_createElementBlock","_hoisted_1","_createVNode","_component_el_row","gutter","default","_withCtx","_component_el_col","span","_component_el_card","shadow","_createElementVNode","_hoisted_2","_toDisplayString","$data","mount","_component_el_button","type","onClick","$options","handleRecharge","_cache","_createTextVNode","_","handleTransfer","header","_hoisted_3","_component_el_table","data","transactions","style","_component_el_table_column","prop","label","width","methods","token","this","$cookies","get","$prompt","confirmButtonText","cancelButtonText","inputPattern","inputErrorMessage","then","value","$axios","post","headers","res","Code","$message","success","Response","$router","go","error","catch","message","amount","account","transfer","showCancelMessage","params","towho","mounted","remove","push","set","expires","path","permission","Orders","i","length","toFixed","Value","__exports__","render"],"sourceRoot":""}