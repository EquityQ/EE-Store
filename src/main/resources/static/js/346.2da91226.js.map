{"version":3,"file":"js/346.2da91226.js","mappings":"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","sources":["webpack://my_cloud_javaweb_project/./src/class/config.js","webpack://my_cloud_javaweb_project/./src/views/shop/UpdateShop.vue","webpack://my_cloud_javaweb_project/./src/views/shop/UpdateShop.vue?0a1d"],"sourcesContent":["const config = {\n    baseUrl: 'http://localhost:8081',\n    api: {\n        captcha: '/user/captcha',\n        login: '/user/login',\n        register: '/user/register',\n        logout: '/user/logout',\n        getUserInfo: '/user/getinfo',\n        authToken:'/user/token-auth',\n        ip: '/system/ip',\n        ShopInfo: \"/element/info\",\n        code: '/user/code',\n        selectUser:\"/user/select-info\",\n        deleteUser:\"/user/delete\",\n        updateUser:\"/user/change\",\n        deleteShop:\"/element/delete\",\n        uploadImg:\"/system/img/base64\",\n        updateShop:\"/element/change\",\n        insertShop:\"/element/insert\",\n        getOrders:\"/pay/getall\",\n        payInsert:\"/pay/top-up\",\n        payMyinfo:\"/pay/get\",\n        payEx:\"/pay/exchange\",\n        payForOrder:\"/pay/pay-order\"\n    },\n    apiUrl: '/api'\n}\nexport default config","<script>\nimport config from \"@/class/config\"\nimport {useRoute} from \"vue-router\"\nexport default{\n  name:\"ShopUpdate\",\n  computed: {\n    config() {\n      return config\n    }\n  },\n  mounted() {\n    const route = useRoute();\n    this.Shopname = route.query.name;\n    if(this.Shopname==null||this.Shopname===\"\"){\n      this.$message.error(\"获取商品信息失败\");\n      this.$router.push(\"/dashboard\");\n      return;\n    }\n    this.$axios.get(config.baseUrl+config.apiUrl+config.api.ShopInfo,{}).then(res=>{\n      if(res.data.Code===200){\n      //   遍历res.data.elements\n        for(var i=0;i<res.data.elements.length;i++){\n          if(res.data.elements[i].name===this.Shopname){\n            this.product=res.data.elements[i];\n            break;\n          }\n        }\n      }else{\n        this.$message.error(res.data.Response);\n        this.$router.push(\"/dashboard\");\n      }\n    })\n  },\n  data(){\n    return{\n      Shopname:\"\",\n      product:{\n        name: \"\",\n        price: \"\",\n        value: \"\",\n        description: \"\",\n        image: \"\"\n      }\n    }\n  },\n  methods:{\n    handleSubmit(){\n      // 检查price参数是否合法\n      if(!/^[0-9]+(.[0-9]{1,2})?$/.test(this.product.price)){\n        this.$message.error(\"商品价格参数不合法\");\n        return;\n      }\n      this.$axios.post(config.baseUrl+config.apiUrl+config.api.updateShop,{\n        name:this.product.name,\n        price:this.product.price,\n        value:this.product.value,\n        description:this.product.description,\n        image:this.product.image,\n        oldName:this.Shopname\n      },{\n        headers:{\n          'token':this.$cookies.get(\"token\")\n        }\n      }).then(res=>{\n        if(res.data.Code===200){\n          this.$message.success(res.data.Response);\n          this.$router.push(\"/dashboard\");\n       }else{\n          this.$message.error(res.data.Response);\n        }\n      })\n    },\n    beforeAvatarUpload(file){\n      const isJPG = file.type === 'image/jpeg';\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isJPG && isLt2M;\n    },\n    handleAvatarSuccess(res) {\n      if(res.Code === 200){\n        this.product.image = res.base64;\n        this.$message.success(res.Response);\n      }else{\n        this.$message.error(res.Response);\n      }\n    }\n  }\n}\n</script>\n\n<template>\n  <h2 style=\"text-align: center\">当前正在修改的商品：{{Shopname}}</h2>\n  <el-form label-width=\"100px\" :model=\"product\">\n    <el-form-item label=\"商品图片\">\n      <el-upload\n        class=\"avatar-uploader\"\n        :action=\"config.baseUrl+config.apiUrl+config.api.uploadImg\"\n        :show-file-list=\"false\"\n        :on-success=\"handleAvatarSuccess\"\n        :before-upload=\"beforeAvatarUpload\"\n      >\n        <img v-if=\"product.image\" :src=\"product.image\" class=\"avatar\">\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n      </el-upload>\n    </el-form-item>\n    <el-form-item label=\"商品名称\">\n      <el-input v-model=\"product.name\" placeholder=\"请输入商品名称\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"商品价格\">\n      <el-input  v-model.trim=\"product.price\" placeholder=\"请输入商品价格\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"商品库存\">\n      <el-input v-model.number=\"product.value\" placeholder=\"请输入商品库存\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"商品描述\">\n      <el-input v-model=\"product.description\" type=\"textarea\" placeholder=\"请输入商品描述\"></el-input>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<style scoped>\n/* 可以在这里添加样式 */\n.el-form {\n  max-width: 600px;\n  margin: 0 auto;\n}\n.avatar{\n  max-width: 500px;\n}\n</style>\n","import { render } from \"./UpdateShop.vue?vue&type=template&id=0bc9271f&scoped=true\"\nimport script from \"./UpdateShop.vue?vue&type=script&lang=js\"\nexport * from \"./UpdateShop.vue?vue&type=script&lang=js\"\n\nimport \"./UpdateShop.vue?vue&type=style&index=0&id=0bc9271f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0bc9271f\"]])\n\nexport default __exports__"],"names":["config","baseUrl","api","captcha","login","register","logout","getUserInfo","authToken","ip","ShopInfo","code","selectUser","deleteUser","updateUser","deleteShop","uploadImg","updateShop","insertShop","getOrders","payInsert","payMyinfo","payEx","payForOrder","apiUrl","style","key","class","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_toDisplayString","$data","Shopname","_createVNode","_component_el_form","model","product","default","_withCtx","_component_el_form_item","label","_component_el_upload","action","$options","handleAvatarSuccess","beforeAvatarUpload","image","src","_hoisted_2","_hoisted_3","_","_component_el_input","modelValue","name","_cache","$event","placeholder","price","modelModifiers","trim","value","number","description","type","_component_el_button","onClick","handleSubmit","_createTextVNode","computed","mounted","route","useRoute","this","query","$message","error","$router","push","$axios","get","then","res","data","Code","i","elements","length","Response","methods","test","post","oldName","headers","$cookies","success","file","isJPG","isLt2M","size","base64","__exports__","render"],"sourceRoot":""}